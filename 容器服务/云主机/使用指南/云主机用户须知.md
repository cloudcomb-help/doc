# 用户须知

## 登录相关

### Linux

* Linux 云主机默认只允许使用密钥对认证方式的 SSH 登录

* SSH 登录的默认用户名为 root，端口为 22

* 你可以在 SSH 登录云主机后，修改 root 密码，之后可以用此密码使用 VNC 方式登录云主机

* 我们强烈建议你不要打开云主机的密码认证方式的 SSH 登录，否则你的云主机将极易被攻破

* 如果你修改了 root 密码，请务必注意密码复杂度，并注意保存好修改后的密码

* VNC 方式登录云主机不依赖云主机本身的网络连通性，相当于云主机的显示器

* 使用 VNC 方式登录云主机时，关闭 VNC 窗口前请先退出云主机的登录状态

### Windows

* Windows 云主机可以使用 VNC 方式登录，打开远程桌面选项之后也可以使用远程桌面方式登录

* 打开远程桌面选项之后，你可以使用远程桌面功能来登录 Windows 云主机，该功能依赖你本地主机和云主机的网络连通，你可以通过外网 IP 或者 VPN + 私有网 IP 来连接云主机的远程桌面

* 为了你的云主机的安全，建议你使用 VNC 方式登录，不建议你打开远程桌面选项，尤其是在你的云主机绑定了外网 IP 的情况下

* 使用 VNC 方式登录云主机时，关闭 VNC 窗口前请先退出云主机的登录状态（注销或者锁定你的云主机）


## 初始化相关

### Linux

* 大部分 Linux 云主机都是不需要配置 license 的，所以当你的云主机操作系统状态变为「可用」后，你就可以 SSH 登录到云主机内部，开始使用它了

### Windows

* 我们提供的 Windows 操作系统云主机都是未激活的版本，你需要自行购买序列号并在初始化过程中进行设置和激活，否则可能导致你的云主机无法正常使用

## 驱动相关

* 我们提供的 Windows 云主机是基于 KVM+virtio 驱动虚拟化技术的，virtio 驱动可以显著提升你的云主机的 IO 性能，所以请不要卸载相关驱动，否则可能导致你的云主机无法使用

## 密码相关

### Linux

* 我们不提供默认 root 密码，如果你需要通过 VNC 登录云主机，你要先 SSH 登录云主机内部后，修改密码，之后再通过 VNC 登录
* 为了 VNC 安全起见，我们对 VNC 窗口也进行了加密，你需要使用创建云主机时指定的 VNC 密码才能打开

### Windows

* 初始密码需要你在创建时指定，你需要注意密码的复杂度，并注意保管好密码

## 自定义镜像相关

* 我们的云主机支持在线自定义镜像，但是需要注意的是，内存中的磁盘缓存数据是不会被保存到在线自定义镜像中的，这就可能导致你制作的在线自定义镜像不可用，或者从在线自定义镜像恢复出的云主机进入修复模式

* 基于上述原因，我们建议你制作离线快照，也即先关闭云主机，之后再制作快照

## 监控相关

### Linux

* 我们的 Linux 云主机监控详情获取依赖的文件和进程有：

	* /etc/vm_monitor 下的文件：用于提供监控配置数据
	* qemu-ga 进程：用于监控程序和云主机通信
	* 请不要修改或者删除该目录下的任何文件，或者停止相关进程，否则可能导致你的云主机监控数据出现异常

* 我们的 Windows 云主机的监控详情获取依赖的服务和进程有：

	* windows monitor service 服务：会每 10 秒拉起 windows monitor agent，执行监控采集
	* windows monitor agent 进程：执行会采集一次监控信息，输出到 c:\vm_monitor\perf.txt
	* 这些进程的可执行文件都存放在 C:\vm_monitor 目录下，请不要修改或者删除该目录下的任何文件，否则可能导致你的云主机监控数据出现异常

## 关机和重启相关

* 我们提供的关机操作通常是与你在云主机内部执行「关机」操作相同的，但是也有一些情况下，两分钟内你的云主机都没有正常关闭，在这种情况下，为了减少你的等待时间，我们会强制关机，这时的操作相当于对你的云主机执行下电操作，可能会导致内存中的磁盘缓存数据丢失，以及启动后进入修复模式

* 针对上述两种可能的问题，如果你的云主机在重启后超过五分钟仍然不可连接，建议你通过 VNC 方式检查云主机是否进入了修复模式，如果是，请退出修复模式并重启，选择正常启动来解决，另外我们还建议你通过 VNC 登录后在云主机内部执行「关机」或者「重启」操作，来避免进入修复模式带来的不便

## 硬盘相关

### Linux

* 页面上进行云硬盘挂载之后，需要登录到云主机内部进行格式化（已经格式化过再次挂载的云硬盘不需要）和 mount 操作之后才能使用

### Windows

* 云硬盘首次使用需要初始化，建议初始化为「基本」磁盘（不建议转换为「动态」磁盘，否则可能出现磁盘异常）

* Windows server 2012R2 操作系统的云主机挂载云硬盘后，需要先把挂载的磁盘状态设置为「联机」，格式化并分配盘符之后才能使用，你可以打开「磁盘管理」功能来执行这些操作

* Windows server 2012R2 操作系统的云主机重启后，也需要在「磁盘管理」中把云硬盘设置为「联机」状态才能使用

* 卸载云硬盘之前，你需要在「磁盘管理」功能中，把要卸载的云硬盘设置为「脱机」状态之后才能卸载

## 高可用相关

* 我们不支持单台云主机的高可用，如果你的云主机出现异常，包括但不限于云主机所在物理机以及云主机本身的内核异常、进程异常、网络异常等，你需要重启或者重新创建云主机等手段来使你的云主机或服务恢复正常
* 如果要保证业务的高可用，请在不同的可用域创建云主机并进行负载均衡，网易蜂巢会在近期上线其他可用域供你使用

## 虚拟内存相关

* Windows 云主机虚拟内存文件 pagefile.sys 大小默认跟云主机的物理内存大小有关，如果你创建 32G 内存的 Windows 主机，有可能会因为 pagefile.sys 文件过大，占用过多系统盘空间，导致系统盘空间只剩下几百兆
* 如果觉得 pagefile.sys 占用空间太大，可以手工调整为自定义大小
* 查看虚拟内存以及修改虚拟内存的方法，请参考「常见问题」页面中的的「如何查看 Windows 主机虚拟内存」和「如何修改 Windows 主机虚拟内存」章节